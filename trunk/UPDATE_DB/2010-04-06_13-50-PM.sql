CREATE OR REPLACE ALGORITHM=MERGE DEFINER=`root`@`localhost` SQL SECURITY INVOKER VIEW `vu_jrawat_pk` AS select `detail_ambil_paket`.`dapaket_jpaket` AS `jrawat_id`,`master_jual_paket`.`jpaket_nobukti` AS `jrawat_nobukti`,`customer`.`cust_nama` AS `cust_nama`,`customer`.`cust_id` AS `jrawat_cust`,`customer`.`cust_no` AS `cust_no`,`customer`.`cust_member` AS `cust_member`,date_format(`detail_ambil_paket`.`dapaket_date_create`,'%Y-%m-%d') AS `jrawat_tanggal`,0 AS `jrawat_diskon`,0 AS `jrawat_cashback`,NULL AS `jrawat_cara`,NULL AS `jrawat_cara2`,NULL AS `jrawat_cara3`,if((substr(`master_jual_paket`.`jpaket_nobukti`,1,2) = 'PK'),0,0) AS `jrawat_totalbiaya`,0 AS `jrawat_bayar`,'' AS `jrawat_keterangan`,`master_jual_paket`.`jpaket_creator` AS `jrawat_creator`,`detail_ambil_paket`.`dapaket_date_create` AS `jrawat_date_create`,`master_jual_paket`.`jpaket_update` AS `jrawat_update`,`master_jual_paket`.`jpaket_date_update` AS `jrawat_date_update`,`master_jual_paket`.`jpaket_revised` AS `jrawat_revised`,if((substr(`master_jual_paket`.`jpaket_nobukti`,1,2) = 'PK'),'paket','') AS `keterangan_paket` from ((((`detail_ambil_paket` left join `detail_jual_paket` on((`detail_ambil_paket`.`dapaket_dpaket` = `detail_jual_paket`.`dpaket_id`))) left join `master_jual_paket` on((`detail_jual_paket`.`dpaket_master` = `master_jual_paket`.`jpaket_id`))) left join `pengguna_paket` on((`pengguna_paket`.`ppaket_master` = `master_jual_paket`.`jpaket_id`))) left join `customer` on((`pengguna_paket`.`ppaket_cust` = `customer`.`cust_id`)));