CREATE OR REPLACE VIEW `vu_detail_invoice` AS select `supplier`.`supplier_nama` AS `supplier_nama`,`supplier`.`supplier_alamat` AS `supplier_alamat`,`supplier`.`supplier_kota` AS `supplier_kota`,`supplier`.`supplier_notelp` AS `supplier_notelp`,`master_invoice`.`invoice_id` AS `invoice_id`,`master_invoice`.`invoice_no` AS `invoice_no`,`master_invoice`.`invoice_supplier` AS `invoice_supplier`,`master_invoice`.`invoice_tanggal` AS `invoice_tanggal`,`master_invoice`.`invoice_noterima` AS `invoice_noterima`,`master_terima_beli`.`terima_no` AS `terima_no`,`master_terima_beli`.`terima_surat_jalan` AS `terima_surat_jalan`,`master_terima_beli`.`terima_pengirim` AS `terima_pengirim`,`master_terima_beli`.`terima_tanggal` AS `terima_tanggal`,`master_invoice`.`invoice_nilai` AS `invoice_nilai`,`master_invoice`.`invoice_jatuhtempo` AS `invoice_jatuhtempo`,`master_invoice`.`invoice_penagih` AS `invoice_penagih`,`detail_invoice`.`dinvoice_master` AS `dinvoice_master`,`detail_invoice`.`dinvoice_produk` AS `dinvoice_produk`,`vu_produk`.`produk_kode` AS `produk_kode`,`vu_produk`.`produk_nama` AS `produk_nama`,`vu_produk`.`produk_point` AS `produk_point`,`vu_produk`.`produk_volume` AS `produk_volume`,`vu_produk`.`kategori_nama` AS `kategori_nama`,`vu_produk`.`kategori2_nama` AS `kategori2_nama`,`detail_invoice`.`dinvoice_satuan` AS `dinvoice_satuan`,`satuan`.`satuan_nama` AS `satuan_nama`,`satuan`.`satuan_kode` AS `satuan_kode`,`detail_invoice`.`dinvoice_jumlah` AS `dinvoice_jumlah`,`detail_invoice`.`dinvoice_harga` AS `dinvoice_harga`,`detail_invoice`.`dinvoice_diskon` AS `dinvoice_diskon` from (((((`detail_invoice` join `master_invoice` on((`detail_invoice`.`dinvoice_master` = `master_invoice`.`invoice_id`))) join `supplier` on((`master_invoice`.`invoice_supplier` = `supplier`.`supplier_id`))) join `vu_produk` on((`detail_invoice`.`dinvoice_produk` = `vu_produk`.`produk_id`))) join `master_terima_beli` on((`master_invoice`.`invoice_noterima` = `master_terima_beli`.`terima_id`))) join `satuan` on((`detail_invoice`.`dinvoice_satuan` = `satuan`.`satuan_id`)));


CREATE OR REPLACE VIEW `vu_total_invoice_group` AS select `detail_invoice`.`dinvoice_master` AS `dinvoice_master`,ifnull(sum(`detail_invoice`.`dinvoice_jumlah`),0) AS `jumlah_barang`,ifnull(sum((((`detail_invoice`.`dinvoice_harga` * `detail_invoice`.`dinvoice_jumlah`) * (100 - `detail_invoice`.`dinvoice_diskon`)) / 100)),0) AS `total_nilai` from `detail_invoice` group by `detail_invoice`.`dinvoice_master`;

CREATE OR REPLACE VIEW `vu_trans_invoice` AS select `master_invoice`.`invoice_id` AS `invoice_id`,`master_invoice`.`invoice_no` AS `no_bukti`,`master_invoice`.`invoice_supplier` AS `invoice_supplier`,`supplier`.`supplier_nama` AS `supplier_nama`,`supplier`.`supplier_alamat` AS `supplier_alamat`,`supplier`.`supplier_kota` AS `supplier_kota`,`supplier`.`supplier_notelp` AS `supplier_notelp`,`master_invoice`.`invoice_noterima` AS `invoice_noterima`,`master_invoice`.`invoice_tanggal` AS `tanggal`,`master_invoice`.`invoice_nilai` AS `invoice_nilai`,`master_invoice`.`invoice_jatuhtempo` AS `invoice_jatuhtempo`,`master_invoice`.`invoice_penagih` AS `invoice_penagih`,`vu_total_invoice_group`.`jumlah_barang` AS `jumlah_barang`,`vu_total_invoice_group`.`total_nilai` AS `total_nilai`,`vu_total_invoice_group`.`dinvoice_master` AS `dinvoice_master`,`master_terima_beli`.`terima_no` AS `terima_no` from (((`master_invoice` join `supplier` on((`master_invoice`.`invoice_supplier` = `supplier`.`supplier_id`))) join `vu_total_invoice_group` on((`vu_total_invoice_group`.`dinvoice_master` = `master_invoice`.`invoice_id`))) join `master_terima_beli` on((`master_invoice`.`invoice_noterima` = `master_terima_beli`.`terima_id`)));
