ALTER TABLE `tindakan_detail` ADD `dtrawat_jam_datang` VARCHAR( 10 ) NULL DEFAULT NULL AFTER `dtrawat_jam`;

CREATE OR REPLACE VIEW `vu_tindakan` AS select `tindakan`.`trawat_id` AS `trawat_id`,`tindakan`.`trawat_cust` AS `trawat_cust`,`tindakan`.`trawat_keterangan` AS `trawat_keterangan`,`tindakan`.`trawat_creator` AS `trawat_creator`,`tindakan`.`trawat_update` AS `trawat_update`,`tindakan`.`trawat_date_update` AS `trawat_date_update`,`tindakan`.`trawat_revised` AS `trawat_revised`,`customer`.`cust_nama` AS `cust_nama`,`customer`.`cust_no` AS `cust_no`,`tindakan_detail`.`dtrawat_id` AS `dtrawat_id`,`tindakan_detail`.`dtrawat_perawatan` AS `dtrawat_perawatan`,`tindakan_detail`.`dtrawat_jam` AS `dtrawat_jam`,`tindakan_detail`.`dtrawat_jam_datang` AS `dtrawat_jam_datang`,`tindakan_detail`.`dtrawat_tglapp` AS `dtrawat_tglapp`,`tindakan_detail`.`dtrawat_status` AS `dtrawat_status`,`tindakan_detail`.`dtrawat_keterangan` AS `dtrawat_keterangan`,`tindakan_detail`.`dtrawat_dapp` AS `dtrawat_dapp`,`tindakan_detail`.`dtrawat_master` AS `dtrawat_master`,`tindakan_detail`.`dtrawat_petugas2` AS `dtrawat_petugas2`,`tindakan_detail`.`dtrawat_ambil_paket` AS `dtrawat_ambil_paket`,`tindakan_detail`.`dtrawat_jumlah` AS `dtrawat_jumlah`,if((`tindakan_detail`.`dtrawat_locked` = 0),_utf8'Terbuka',_utf8'Tertutup') AS `dtrawat_edit`,`perawatan`.`rawat_nama` AS `rawat_nama`,`perawatan`.`rawat_harga` AS `rawat_harga`,`perawatan`.`rawat_du` AS `rawat_du`,`perawatan`.`rawat_dm` AS `rawat_dm`,`dokter`.`karyawan_nama` AS `dokter_nama`,`dokter`.`karyawan_id` AS `dokter_id`,`dokter`.`karyawan_username` AS `dokter_username`,`terapis`.`karyawan_nama` AS `terapis_nama`,`terapis`.`karyawan_id` AS `terapis_id`,`terapis`.`karyawan_username` AS `terapis_username`,`kategori`.`kategori_nama` AS `kategori_nama`,`tindakan_detail`.`dtrawat_jumlah` AS `jumlah` from ((((((`tindakan` join `customer` on((`tindakan`.`trawat_cust` = `customer`.`cust_id`))) join `tindakan_detail` on((`tindakan_detail`.`dtrawat_master` = `tindakan`.`trawat_id`))) left join `perawatan` on((`tindakan_detail`.`dtrawat_perawatan` = `perawatan`.`rawat_id`))) left join `karyawan` `dokter` on((`tindakan_detail`.`dtrawat_petugas1` = `dokter`.`karyawan_id`))) left join `karyawan` `terapis` on((`tindakan_detail`.`dtrawat_petugas2` = `terapis`.`karyawan_id`))) left join `kategori` on((`perawatan`.`rawat_kategori` = `kategori`.`kategori_id`)));

ALTER TABLE `appointment_detail` ADD `dapp_jambatal` DATETIME NOT NULL AFTER `dapp_jamdatang`,
ADD `dapp_jamkonfirmasi` DATETIME NOT NULL AFTER `dapp_jambatal` ;

CREATE OR REPLACE VIEW `vu_appointment` AS select `appointment`.`app_id` AS `app_id`,`appointment`.`app_tanggal` AS `app_tanggal`,`appointment`.`app_cara` AS `app_cara`,`appointment`.`app_keterangan` AS `app_keterangan`,`appointment`.`app_customer` AS `app_customer`,`appointment`.`app_creator` AS `app_creator`,`appointment`.`app_date_create` AS `app_date_create`,`appointment`.`app_update` AS `app_update`,`appointment`.`app_date_update` AS `app_date_update`,`appointment`.`app_revised` AS `app_revised`,`appointment_detail`.`dapp_id` AS `dapp_id`,`appointment_detail`.`dapp_status` AS `dapp_status`,`appointment_detail`.`dapp_tglreservasi` AS `dapp_tglreservasi`,`appointment_detail`.`dapp_tgldatang` AS `dapp_tgldatang`,`appointment_detail`.`dapp_jamdatang` AS `dapp_jamdatang`,`appointment_detail`.`dapp_jamreservasi` AS `dapp_jamreservasi`,`appointment_detail`.`dapp_jambatal` AS `dapp_jambatal`,`appointment_detail`.`dapp_jamkonfirmasi` AS `dapp_konfirmasi`,`appointment_detail`.`dapp_keterangan` AS `dapp_keterangan`,`appointment_detail`.`dapp_counter` AS `dapp_counter`,`appointment_detail`.`dapp_warna_terapis` AS `dapp_warna_terapis`,`appointment_detail`.`dapp_locked` AS `dapp_locked`,`perawatan`.`rawat_id` AS `rawat_id`,`perawatan`.`rawat_nama` AS `rawat_nama`,`perawatan`.`rawat_warna` AS `rawat_warna`,`customer`.`cust_nama` AS `cust_nama`,`customer`.`cust_id` AS `cust_id`,`customer`.`cust_no` AS `cust_no`,`kategori`.`kategori_nama` AS `kategori_nama`,`karyawan_dokter`.`karyawan_nama` AS `dokter_nama`,`karyawan_dokter`.`karyawan_id` AS `dokter_id`,`karyawan_dokter`.`karyawan_username` AS `dokter_username`,`karyawan_dokter`.`karyawan_no` AS `dokter_no`,`karyawan_terapis`.`karyawan_nama` AS `terapis_nama`,`karyawan_terapis`.`karyawan_id` AS `terapis_id`,`karyawan_terapis`.`karyawan_username` AS `terapis_username`,`karyawan_terapis`.`karyawan_no` AS `terapis_no` from ((((((`appointment` join `appointment_detail` on((`appointment`.`app_id` = `appointment_detail`.`dapp_master`))) join `perawatan` on((`appointment_detail`.`dapp_perawatan` = `perawatan`.`rawat_id`))) join `customer` on((`appointment`.`app_customer` = `customer`.`cust_id`))) join `kategori` on((`perawatan`.`rawat_kategori` = `kategori`.`kategori_id`))) left join `karyawan` `karyawan_dokter` on((`appointment_detail`.`dapp_petugas` = `karyawan_dokter`.`karyawan_id`))) left join `karyawan` `karyawan_terapis` on((`appointment_detail`.`dapp_petugas2` = `karyawan_terapis`.`karyawan_id`)));
