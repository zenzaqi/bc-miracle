CREATE OR REPLACE ALGORITHM=UNDEFINED SQL SECURITY INVOKER VIEW `vu_detail_fpiutang` AS select `detail_lunas_piutang`.`dpiutang_id` AS `dpiutang_id`,`detail_lunas_piutang`.`dpiutang_master` AS `dpiutang_master`,`detail_lunas_piutang`.`dpiutang_nobukti` AS `dpiutang_nobukti`,`detail_lunas_piutang`.`dpiutang_nilai` AS `dpiutang_nilai`,`detail_lunas_piutang`.`dpiutang_tanggal` AS `dpiutang_tanggal`,`detail_lunas_piutang`.`dpiutang_cara` AS `dpiutang_cara`,`detail_lunas_piutang`.`dpiutang_keterangan` AS `dpiutang_keterangan` from (`detail_lunas_piutang` join `master_faktur_lunas_piutang` on((`detail_lunas_piutang`.`dpiutang_nobukti` = `master_faktur_lunas_piutang`.`fpiutang_nobukti`))) where (`master_faktur_lunas_piutang`.`fpiutang_stat_dok` = 'Tertutup');

CREATE OR REPLACE ALGORITHM=UNDEFINED SQL SECURITY INVOKER VIEW `vu_detail_lunas_piutang` AS select `master_lunas_piutang`.`lpiutang_faktur` AS `no_bukti`,`master_lunas_piutang`.`lpiutang_cust` AS `lpiutang_cust`,`customer`.`cust_no` AS `cust_no`,`customer`.`cust_id` AS `cust_id`,`customer`.`cust_member` AS `cust_member`,`customer`.`cust_nama` AS `cust_nama`,`master_lunas_piutang`.`lpiutang_faktur_tanggal` AS `tanggal`,`master_lunas_piutang`.`lpiutang_keterangan` AS `lpiutang_keterangan`,`master_lunas_piutang`.`lpiutang_status` AS `lpiutang_status`,`master_lunas_piutang`.`lpiutang_total` AS `lpiutang_total`,`master_lunas_piutang`.`lpiutang_sisa` AS `lpiutang_sisa`,`master_lunas_piutang`.`lpiutang_jenis_transaksi` AS `lpiutang_jenis_transaksi`,`master_lunas_piutang`.`lpiutang_stat_dok` AS `lpiutang_stat_dok`,`vu_detail_fpiutang`.`dpiutang_id` AS `dpiutang_id`,`vu_detail_fpiutang`.`dpiutang_nobukti` AS `dpiutang_nobukti`,ifnull(`vu_detail_fpiutang`.`dpiutang_nilai`,0) AS `dpiutang_nilai`,ifnull(`vu_detail_fpiutang`.`dpiutang_tanggal`,_utf8'') AS `dpiutang_tanggal`,ifnull(`vu_detail_fpiutang`.`dpiutang_cara`,_latin1'-') AS `dpiutang_cara`,(case when (`vu_detail_fpiutang`.`dpiutang_cara` = 'tunai') then ifnull(`vu_detail_fpiutang`.`dpiutang_nilai`,0) else 0 end) AS `piutang_tunai`,(case when (`vu_detail_fpiutang`.`dpiutang_cara` = 'card') then ifnull(`vu_detail_fpiutang`.`dpiutang_nilai`,0) else 0 end) AS `piutang_card`,(case when (`vu_detail_fpiutang`.`dpiutang_cara` = 'cek/giro') then ifnull(`vu_detail_fpiutang`.`dpiutang_nilai`,0) else 0 end) AS `piutang_cek`,(case when (`vu_detail_fpiutang`.`dpiutang_cara` = 'transfer') then ifnull(`vu_detail_fpiutang`.`dpiutang_nilai`,0) else 0 end) AS `piutang_transfer` from ((`master_lunas_piutang` left join `vu_detail_fpiutang` on((`master_lunas_piutang`.`lpiutang_id` = `vu_detail_fpiutang`.`dpiutang_master`))) join `customer` on((`master_lunas_piutang`.`lpiutang_cust` = `customer`.`cust_id`)));