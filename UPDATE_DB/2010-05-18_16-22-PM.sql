CREATE OR REPLACE VIEW `vu_detail_jual_produk` AS select `detail_jual_produk`.`dproduk_id` AS `dproduk_id`,`detail_jual_produk`.`dproduk_produk` AS `dproduk_produk`,`detail_jual_produk`.`dproduk_satuan` AS `dproduk_satuan`,`detail_jual_produk`.`dproduk_jumlah` AS `jumlah_barang`,`detail_jual_produk`.`dproduk_harga` AS `harga_satuan`,`detail_jual_produk`.`dproduk_diskon` AS `diskon`,`detail_jual_produk`.`dproduk_diskon_jenis` AS `diskon_jenis`,`karyawan`.`karyawan_username` AS `sales`,`master_jual_produk`.`jproduk_nobukti` AS `no_bukti`,`master_jual_produk`.`jproduk_tanggal` AS `tanggal`,`customer`.`cust_id` AS `cust_id`,`customer`.`cust_no` AS `cust_no`,`customer`.`cust_member` AS `cust_member`,`customer`.`cust_nama` AS `cust_nama`,`customer`.`cust_kelamin` AS `cust_kelamin`,`customer`.`cust_alamat` AS `cust_alamat`,`customer`.`cust_kota` AS `cust_kota`,`produk`.`produk_kode` AS `produk_kode`,`produk`.`produk_kategori` AS `produk_kategori`,`produk`.`produk_kontribusi` AS `produk_kontribusi`,`produk`.`produk_nama` AS `produk_nama`,`produk`.`produk_satuan` AS `produk_satuan`,`produk`.`produk_du` AS `produk_du`,`produk`.`produk_dm` AS `produk_dm`,`produk`.`produk_point` AS `produk_point`,`produk`.`produk_harga` AS `produk_harga`,`produk`.`produk_volume` AS `produk_volume`,`produk`.`produk_jenis` AS `produk_jenis`,`satuan`.`satuan_nama` AS `satuan_nama`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,(((`detail_jual_produk`.`dproduk_harga` * `detail_jual_produk`.`dproduk_diskon`) / 100) * `detail_jual_produk`.`dproduk_jumlah`)) AS `diskon_nilai`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,((`detail_jual_produk`.`dproduk_harga` * `detail_jual_produk`.`dproduk_jumlah`) - (((`detail_jual_produk`.`dproduk_harga` * `detail_jual_produk`.`dproduk_diskon`) / 100) * `detail_jual_produk`.`dproduk_jumlah`))) AS `subtotal`,`master_jual_produk`.`jproduk_id` AS `jproduk_id`,`master_jual_produk`.`jproduk_stat_dok` AS `jproduk_stat_dok` from (((((`detail_jual_produk` left join `master_jual_produk` on((`detail_jual_produk`.`dproduk_master` = `master_jual_produk`.`jproduk_id`))) left join `customer` on((`master_jual_produk`.`jproduk_cust` = `customer`.`cust_id`))) left join `produk` on((`detail_jual_produk`.`dproduk_produk` = `produk`.`produk_id`))) left join `satuan` on((`detail_jual_produk`.`dproduk_satuan` = `satuan`.`satuan_id`))) left join `karyawan` on((`detail_jual_produk`.`dproduk_karyawan` = `karyawan`.`karyawan_id`)));

CREATE OR REPLACE VIEW `vu_trans_produk` AS select `master_jual_produk`.`jproduk_nobukti` AS `no_bukti`,`master_jual_produk`.`jproduk_cust` AS `cust_id`,`master_jual_produk`.`jproduk_tanggal` AS `tanggal`,`vu_customer`.`cust_no` AS `cust_no`,`vu_customer`.`cust_member` AS `cust_member`,`vu_customer`.`cust_nama` AS `cust_nama`,`vu_customer`.`cust_kelamin` AS `cust_kelamin`,`vu_customer`.`cust_alamat` AS `cust_alamat`,`vu_customer`.`cust_kota` AS `cust_kota`,ifnull(`vu_total_jual_produk_group`.`jumlah_barang`,0) AS `jumlah_barang`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,ifnull(`vu_total_jual_produk_group`.`total_nilai`,0)) AS `total_nilai`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,ifnull(`master_jual_produk`.`jproduk_diskon`,0)) AS `diskon`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,ifnull(`master_jual_produk`.`jproduk_cashback`,0)) AS `cashback`,ifnull(`jual_kredit`.`jkredit_nilai`,0) AS `kredit`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,ifnull(`jual_cek`.`jcek_nilai`,0)) AS `cek`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,ifnull(`jual_card`.`jcard_nilai`,0)) AS `card`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,ifnull(`jual_kwitansi`.`jkwitansi_nilai`,0)) AS `kuintansi`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,ifnull(`jual_transfer`.`jtransfer_nilai`,0)) AS `transfer`,if((`master_jual_produk`.`jproduk_stat_dok` = 'Batal'),0,ifnull(`jual_tunai`.`jtunai_nilai`,0)) AS `tunai`,`master_jual_produk`.`jproduk_stat_dok` AS `jproduk_stat_dok` from ((((((((`master_jual_produk` left join `vu_total_jual_produk_group` on((`vu_total_jual_produk_group`.`dproduk_master` = `master_jual_produk`.`jproduk_id`))) left join `vu_customer` on((`master_jual_produk`.`jproduk_cust` = `vu_customer`.`cust_id`))) left join `jual_card` on((`jual_card`.`jcard_ref` = `master_jual_produk`.`jproduk_nobukti`))) left join `jual_cek` on((`jual_cek`.`jcek_ref` = `master_jual_produk`.`jproduk_nobukti`))) left join `jual_kredit` on((`jual_kredit`.`jkredit_ref` = `master_jual_produk`.`jproduk_nobukti`))) left join `jual_kwitansi` on((`jual_kwitansi`.`jkwitansi_ref` = `master_jual_produk`.`jproduk_nobukti`))) left join `jual_transfer` on((`jual_transfer`.`jtransfer_ref` = `master_jual_produk`.`jproduk_nobukti`))) left join `jual_tunai` on((`jual_tunai`.`jtunai_ref` = `master_jual_produk`.`jproduk_nobukti`)));